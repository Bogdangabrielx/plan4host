/* Sparkle border wrapper for Check-in CTA (non-intrusive: does not change inner button styles) */

@property --sweep-angle { syntax: "<angle>"; initial-value: 0deg; inherits: false; }

.sparkleWrap { position: relative; display: inline-block; border-radius: 12px; }
.sparkleWrap > * { position: relative; z-index: 0; border-radius: 10px; }

.sparkleWrap::before{
  content: "";
  position: absolute; inset: 0; border-radius: inherit; padding: 1.5px; /* ring thickness */
  background:
    conic-gradient(from var(--sweep-angle),
      transparent 0deg,
      transparent 300deg,
      rgba(25,189,99,.95) 315deg,
      rgba(25,189,99,.8) 330deg,
      transparent 345deg
    );
  /* show only the border ring */
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
          mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; 
          mask-composite: exclude;
  opacity: 0; transition: opacity .2s ease;
  pointer-events: none; z-index: 1;
}

.sparkleWrap::after{
  content: "";
  position: absolute; top: 8px; left: 10px; width: 44px; height: 22px; pointer-events: none; opacity: 0; transition: opacity .2s ease;
  --star:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='white' d='M50 0 Q 68 30 100 50 Q 70 68 50 100 Q 32 70 0 50 Q 30 32 50 0 Z'/%3E%3C/svg%3E");
  background:
    var(--star) 0% 50%/12px 12px no-repeat,
    var(--star) 40% 10%/9px 9px no-repeat,
    var(--star) 82% 70%/10px 10px no-repeat;
  filter:
    drop-shadow(0 0 6px rgba(255,255,255,.7))
    drop-shadow(0 0 18px color-mix(in srgb, var(--primary) 65%, transparent));
  z-index: 2;
}

.sparkleWrap:hover::before,
.sparkleWrap:focus-within::before { opacity: 1; animation: sweep-rotate 1.8s linear infinite; }
.sparkleWrap[data-animate="true"]::before { opacity: 1; animation: sweep-rotate 1.8s linear infinite; }

.sparkleWrap:hover::after,
.sparkleWrap:focus-within::after { opacity: 1; animation: stars-twinkle 1.8s ease-in-out infinite; }
.sparkleWrap[data-animate="true"]::after { opacity: 1; animation: stars-twinkle 1.8s ease-in-out infinite; }

@keyframes sweep-rotate { to { --sweep-angle: 360deg; } }
@keyframes stars-twinkle {
  0%,100% {
    filter: drop-shadow(0 0 6px rgba(255,255,255,.7))
            drop-shadow(0 0 18px color-mix(in srgb, var(--primary) 65%, transparent));
    transform: translateY(0) rotate(0deg);
  }
  50% {
    filter: drop-shadow(0 0 10px rgba(255,255,255,1))
            drop-shadow(0 0 26px color-mix(in srgb, var(--primary) 75%, transparent));
    transform: translateY(-1px) rotate(6deg);
  }
}

@media (hover:none){
  .sparkleWrap::before, .sparkleWrap::after { display: none !important; }
  .sparkleWrap[data-animate="true"]::before,
  .sparkleWrap[data-animate="true"]::after { display: block !important; }
}
